<ion-header>
	<ion-navbar color="primary">
		<ion-buttons start>
			<button ion-button>
				<ion-icon name="back"></ion-icon>
			</button>
		</ion-buttons>
		<ion-title>{{form.name}}</ion-title>
		<ion-buttons end>
			<button ion-button (click)="sync()" [disabled]="!hasSubmissionsToSend">
				<ion-icon name="cloud-upload" class="sync-submissions"></ion-icon>
			</button>
		</ion-buttons>
	</ion-navbar>
	<ion-grid style="background-color: white;">
		<ion-row>
			<ion-col>
				<h4>{{filter.description}}</h4>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col>
				<ion-segment [(ngModel)]="filter"  (ionChange)="onFilterChanged()" color="dark" class="segment">

          <ion-segment-button [value]="filter" [ngClass]="filter.id" *ngFor="let filter of filters; let i = index">
          {{filter.title}}
          </ion-segment-button>

				</ion-segment>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-header>

<ion-content class="form-summary">
	<div [hidden]="filteredSubmissions.length == 0">
		<!-- [virtualScroll]="filteredSubmissions" approxItemHeight="84px"-->
		<ion-list >
      <ion-item-sliding *ngFor="let submission of filteredSubmissions"  [class.danger]="submission.invalid_fields == 1">
        <ion-item (click)="goToEntry(submission)">
          <img class="business-card-thumbnail" *ngIf="submission.status != 1 && getBusinessCard(submission)" [src]="getBusinessCard(submission) | convertFileSrc">

          <div *ngIf="!shouldShowBusinessCard(submission) && !isNoProcessedRapidScan(submission)">
            <h1>{{displayedName(submission)}}</h1>
            <h2>{{submission.company}}</h2>
            <h2>{{displayedProperty(submission, "email")}}</h2>
            <h2>{{submission.telephone}}</h2>
          </div>

          <div *ngIf="!shouldShowBusinessCard(submission) && isNoProcessedRapidScan(submission)">
            <h1><i>Processing scan...</i></h1>
          </div>

          <button ion-button item-right icon-only clear (click)="statusClick($event, submission)" [disabled]="syncing">
            <ion-icon [name]="getIcon(submission)" [color]="getColor(submission)"></ion-icon>
          </button>
        </ion-item>
        <ion-item-options side="right" *ngIf="isSubmissionRemovable(submission)">
          <button ion-button color="danger" (click)="deleteSubmission(submission)">
            <ion-icon name="trash"></ion-icon>
            Delete
          </button>
        </ion-item-options>
      </ion-item-sliding>

		</ion-list>
	</div>
	<!--ion-infinite-scroll (ionInfinite)="doInfinite($event)">
		<ion-infinite-scroll-content></ion-infinite-scroll-content>
	</ion-infinite-scroll-->
</ion-content>
